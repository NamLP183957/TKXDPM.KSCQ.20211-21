{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\Documents\\\\Nam04_Ky1\\\\XayDungPhatTrienPhanMem\\\\TKXDPM.KSCQ.20211-21\\\\Software_Programing\\\\font_end\\\\src\\\\components\\\\returnBike\\\\station\\\\ParkingSlot.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useEffect, useState, Component } from 'react';\nimport { Form } from \"react-bootstrap\";\nimport PopupBody from '../../popup/PopupBody';\nimport PopupDialog from '../../popup/PopupDialog';\nimport PopupTitle from '../../popup/PopupTitle';\nimport { useHistory } from 'react-router-dom';\nimport { BIKE_TYPE } from '../../../variables/ConstantCommon';\nimport { getParkingSLot, processTransaction } from '../../../services/ReturnBikeService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ParkingSlot(props) {\n  _s();\n\n  const history = useHistory();\n  const {\n    stationId,\n    type,\n    vehicle\n  } = props;\n  const [slots, setSlots] = useState([]);\n  const [parkingSlot, setParkingSlot] = useState(\"\");\n  const card = {\n    owner: 'Group 21',\n    cardCode: 'kscq1_group21_2021',\n    dateExpired: '1125',\n    cvvCode: '899'\n  };\n  useEffect(() => {\n    (async () => {\n      // const resp = await axios.get(\"http://localhost:8081/api/return-bike/get-parking-slot/\" + stationId + \"/\" + type);\n      const resp = await getParkingSLot(stationId, type);\n      console.log(resp);\n      setSlots(resp.data);\n    })();\n  }, []);\n\n  const onChangeSlot = e => {\n    setParkingSlot(e.target.value);\n    console.log(parkingSlot);\n  };\n\n  const handleReturnBike = () => {\n    const paymentForm = {\n      card,\n      parkingSlotId: parkingSlot,\n      vehicle\n    };\n    const paymentFormJSON = JSON.stringify(paymentForm);\n    console.log(paymentFormJSON);\n\n    (async paymentFormJSON => {\n      // const resp = await axios.post(\"http://localhost:8081/api/return-bike/process-transaction\", paymentFormJSON, {\n      //     headers: {\"Content-Type\": \"application/json\"}\n      // });\n      const resp = await processTransaction(paymentFormJSON);\n\n      if (resp.status === 200) {\n        console.log(resp.data);\n        const {\n          card,\n          createdAt,\n          errorCode,\n          transactionContent,\n          transactionId,\n          amount\n        } = resp.data;\n        history.push({\n          pathname: \"/renting-return-bike/transaction-result\",\n          state: {\n            amount: amount,\n            createdAt: createdAt,\n            card: card,\n            transactionContent: transactionContent\n          }\n        });\n      } else {\n        console.log(\"error transaction\");\n      }\n    })(paymentFormJSON);\n  };\n\n  let typeBike = BIKE_TYPE[type]; // switch(type){\n  //     case 1:\n  //         typeBike = \"Xe đạp\";\n  //         break;\n  //     case 2:\n  //         typeBike = \"Xe đạp đơn điện\";\n  //         break;\n  //     case 3:\n  //         typeBike = \"Xe đạp đôi\";\n  //         break;\n  //     case 4:\n  //         typeBike = \"Xe đạp đôi điện\";\n  //         break;\n  //     default:\n  //         break;\n  // }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(PopupDialog, {\n      handleOnClose: props.handleOnClose,\n      children: [/*#__PURE__*/_jsxDEV(PopupTitle, {\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-titlte\",\n          children: \"Select blank slot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PopupBody, {\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"w-100\",\n          children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: typeBike\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: slots.length > 0 ? /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"form-select\",\n                  value: parkingSlot,\n                  onChange: e => onChangeSlot(e),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: parkingSlot,\n                    selected: true,\n                    hidden: true,\n                    children: parkingSlot\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 97,\n                    columnNumber: 37\n                  }, this), slots.map((slot, index) => {\n                    var {\n                      id,\n                      stationId,\n                      type,\n                      status\n                    } = slot;\n                    return /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: id,\n                      children: id\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 100,\n                      columnNumber: 48\n                    }, this);\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 35\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-danger\",\n                  children: \"Not Avaible Parking Slot !\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 35\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: parkingSlot != \"\" ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-primary\",\n                  onClick: () => handleReturnBike(),\n                  children: \"Tr\\u1EA3 xe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 34\n                }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-primary\",\n                  disabled: true,\n                  children: \"Tr\\u1EA3 xe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 34\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ParkingSlot, \"ivYRZ9nZrMJYZV5MYVtEJUNcPPE=\", false, function () {\n  return [useHistory];\n});\n\n_c = ParkingSlot;\nexport default ParkingSlot;\n\nvar _c;\n\n$RefreshReg$(_c, \"ParkingSlot\");","map":{"version":3,"sources":["C:/Users/ADMIN/Documents/Nam04_Ky1/XayDungPhatTrienPhanMem/TKXDPM.KSCQ.20211-21/Software_Programing/font_end/src/components/returnBike/station/ParkingSlot.js"],"names":["axios","React","useEffect","useState","Component","Form","PopupBody","PopupDialog","PopupTitle","useHistory","BIKE_TYPE","getParkingSLot","processTransaction","ParkingSlot","props","history","stationId","type","vehicle","slots","setSlots","parkingSlot","setParkingSlot","card","owner","cardCode","dateExpired","cvvCode","resp","console","log","data","onChangeSlot","e","target","value","handleReturnBike","paymentForm","parkingSlotId","paymentFormJSON","JSON","stringify","status","createdAt","errorCode","transactionContent","transactionId","amount","push","pathname","state","typeBike","handleOnClose","length","map","slot","index","id"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState, Component } from 'react';\r\nimport { Form } from \"react-bootstrap\";\r\nimport PopupBody from '../../popup/PopupBody';\r\nimport PopupDialog from '../../popup/PopupDialog';\r\nimport PopupTitle from '../../popup/PopupTitle';\r\nimport { useHistory } from 'react-router-dom';\r\nimport {BIKE_TYPE} from '../../../variables/ConstantCommon'\r\nimport {getParkingSLot, processTransaction} from '../../../services/ReturnBikeService'\r\nfunction ParkingSlot(props) {\r\n    const history = useHistory();\r\n    const {stationId, type, vehicle} = props;\r\n    const [slots, setSlots] = useState([]);\r\n    const [parkingSlot, setParkingSlot] = useState(\"\");\r\n\r\n    const card = {\r\n        owner: 'Group 21',\r\n        cardCode: 'kscq1_group21_2021',\r\n        dateExpired: '1125',\r\n        cvvCode: '899'\r\n    };\r\n\r\n    useEffect(() => {\r\n        (async() => {\r\n            // const resp = await axios.get(\"http://localhost:8081/api/return-bike/get-parking-slot/\" + stationId + \"/\" + type);\r\n            const resp = await getParkingSLot(stationId, type);\r\n            console.log(resp);\r\n            setSlots(resp.data);\r\n        })()\r\n    }, [])\r\n\r\n    const onChangeSlot = (e) => {\r\n        setParkingSlot(e.target.value);\r\n        console.log(parkingSlot);\r\n    }\r\n\r\n    const handleReturnBike = () => {\r\n\r\n        const paymentForm = {card, parkingSlotId: parkingSlot, vehicle};\r\n        const paymentFormJSON = JSON.stringify(paymentForm);\r\n        console.log(paymentFormJSON);\r\n        (async (paymentFormJSON) => {\r\n            // const resp = await axios.post(\"http://localhost:8081/api/return-bike/process-transaction\", paymentFormJSON, {\r\n            //     headers: {\"Content-Type\": \"application/json\"}\r\n            // });\r\n        const resp = await processTransaction(paymentFormJSON);\r\n            if (resp.status === 200) {\r\n                console.log(resp.data);\r\n                const {card, createdAt, errorCode, transactionContent, transactionId, amount} = resp.data;\r\n                history.push({\r\n                    pathname: \"/renting-return-bike/transaction-result\",\r\n                    state: {\r\n                        amount: amount,\r\n                        createdAt: createdAt,\r\n                        card: card,\r\n                        transactionContent: transactionContent\r\n                    }\r\n                })\r\n            } else {\r\n                console.log(\"error transaction\");\r\n            }\r\n            \r\n        }) (paymentFormJSON);\r\n    }\r\n\r\n    let typeBike = BIKE_TYPE[type];\r\n    // switch(type){\r\n    //     case 1:\r\n    //         typeBike = \"Xe đạp\";\r\n    //         break;\r\n    //     case 2:\r\n    //         typeBike = \"Xe đạp đơn điện\";\r\n    //         break;\r\n    //     case 3:\r\n    //         typeBike = \"Xe đạp đôi\";\r\n    //         break;\r\n    //     case 4:\r\n    //         typeBike = \"Xe đạp đôi điện\";\r\n    //         break;\r\n    //     default:\r\n    //         break;\r\n    // }\r\n    return (\r\n        <div>\r\n            <PopupDialog handleOnClose={props.handleOnClose}>\r\n                <PopupTitle>\r\n                    <h4 className='text-titlte'>Select blank slot</h4>\r\n                </PopupTitle>\r\n                <PopupBody>\r\n                    <table className='w-100'>\r\n                        <tbody>\r\n                        <tr>\r\n                            <td><span>{typeBike}</span></td>\r\n                            <td>\r\n                                {slots.length > 0 \r\n                                ? <select className=\"form-select\" value={parkingSlot} onChange={(e) => onChangeSlot(e)}>\r\n                                    <option value={parkingSlot} selected hidden>{parkingSlot}</option>\r\n                                    {slots.map((slot, index) => {\r\n                                        var {id, stationId, type, status} = slot;\r\n                                        return(<option key={index} value={id}>{id}</option>)\r\n                                    })}\r\n                                </select> \r\n                                : <span className='text-danger'>Not Avaible Parking Slot !</span>\r\n                                }\r\n                            </td>\r\n                            <td>\r\n                                {parkingSlot!=\"\" \r\n                                ?<button className='btn btn-primary' onClick={() => handleReturnBike()} >Trả xe</button>\r\n                                :<button className='btn btn-primary' disabled>Trả xe</button>}\r\n                            </td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </PopupBody>\r\n            </PopupDialog>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ParkingSlot\r\n"]},"metadata":{},"sourceType":"module"}